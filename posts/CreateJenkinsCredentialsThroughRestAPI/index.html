<!DOCTYPE html><html lang="en" data-mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Create Jenkins Credentials Through Rest API" /><meta property="og:locale" content="en" /><meta name="description" content="Create Jenkins Credentials Through Rest API" /><meta property="og:description" content="Create Jenkins Credentials Through Rest API" /><link rel="canonical" href="https://yasassri.github.io/posts/CreateJenkinsCredentialsThroughRestAPI/" /><meta property="og:url" content="https://yasassri.github.io/posts/CreateJenkinsCredentialsThroughRestAPI/" /><meta property="og:site_name" content="Yasassri Ratnayake" /><meta property="og:image" content="https://yasassri.github.io/assets/img/posts/jenkins.jpg" /><meta property="og:image:height" content="500" /><meta property="og:image:width" content="800" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-07-10T00:00:00-04:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://yasassri.github.io/assets/img/posts/jenkins.jpg" /><meta property="twitter:title" content="Create Jenkins Credentials Through Rest API" /><meta name="twitter:site" content="@yasassrir" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-07-10T18:21:17-04:00","datePublished":"2022-07-10T00:00:00-04:00","description":"Create Jenkins Credentials Through Rest API","headline":"Create Jenkins Credentials Through Rest API","image":{"width":800,"height":500,"alt":null,"url":"https://yasassri.github.io/assets/img/posts/jenkins.jpg","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://yasassri.github.io/posts/CreateJenkinsCredentialsThroughRestAPI/"},"url":"https://yasassri.github.io/posts/CreateJenkinsCredentialsThroughRestAPI/"}</script><title>Create Jenkins Credentials Through Rest API | Yasassri Ratnayake</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Yasassri Ratnayake"><meta name="application-name" content="Yasassri Ratnayake"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/favicons/android-chrome-512x512.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Yasassri Ratnayake</a></div><div class="site-subtitle font-italic">My Personal Web Space</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/otherblogs/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>OTHER BLOGS</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/yasassri" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://stackoverflow.com/users/2627018/ycr" aria-label="stack-overflow" target="_blank" rel="noopener"> <i class="fab fa-stack-overflow"></i> </a> <a href="https://www.linkedin.com/in/yasassriratnayake" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['ycrnet','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Create Jenkins Credentials Through Rest API</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Create Jenkins Credentials Through Rest API</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1657425600" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jul 10, 2022 </em> </span> <span> Updated <em class="" data-ts="1657491677" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jul 10, 2022 </em> </span><div class="mt-3 mb-3"> <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 500'%3E%3C/svg%3E" data-src="/assets/img/posts/jenkins.jpg" class="preview-img bg" alt="Preview Image" width="800" height="500" data-proofer-ignore></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/yasassri">Yasassri Ratnayake</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="601 words"> <em>3 min</em> read</span></div></div></div><div class="post-content"><p>In this post I’ll explain how you can create Jenkins credentials through the Jenkins Rest API. Let’s get into it straight away.</p><h3 id="how-to-authenticate-jenkins-api"><span class="mr-2">How To Authenticate Jenkins API</span><a href="#how-to-authenticate-jenkins-api" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Inorder to Authenticate the API call you have to pass an API token and the Jenkins Crump with the API call. Jenkins Crunb was introduced to prevent CSRF attacks. Let’s see how exactly you can get all these details.</p><p>$JENKINS_URL : This variable refers to Jenkins URL with the custom context if you have any. $JENKINS_USER : Username of the user used to generate the access token $JENKINS_PASSWORD : Password of the user used to generate the access token $API_ACCESS_TOKEN : The access token. $JENKINS_CRUMB ; Jenkis Crumb.</p><ol><li>First we need to get the Jenkins <code class="language-plaintext highlighter-rouge">crumb</code> by passing the <code class="language-plaintext highlighter-rouge">Basic Auth</code> header. We also need to save the Cookies so we can use the same Cookies when doing the API request for this I’m using <code class="language-plaintext highlighter-rouge">--cookie-jar</code> option with <code class="language-plaintext highlighter-rouge">curl</code>.</ol><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>curl <span class="nt">-s</span> <span class="nt">--cookie-jar</span> /tmp/cookies <span class="nt">-u</span> <span class="nv">$JENKINS_USER</span>:<span class="nv">$JENKINS_PASSWORD</span> <span class="nv">$JENKINS_URL</span>/crumbIssuer/api/json
</pre></table></code></div></div><p>The above will give you a response like the below.</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"_class"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hudson.security.csrf.DefaultCrumbIssuer"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"crumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e6aa50dfdda70b3db256d27a1effe7e0be5033b94d9edeaa9e108c212e91f4c2"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"crumbRequestField"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jenkins-Crumb"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p>From the above, you can extract the <code class="language-plaintext highlighter-rouge">crumb</code> value and pass it with the header <code class="language-plaintext highlighter-rouge">Jenkins-Crumb</code> to generate a token.</p><ol><li>Send the following <code class="language-plaintext highlighter-rouge">curl</code> request to Generate an Access Token.</ol><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>curl <span class="nt">-u</span> <span class="s2">"</span><span class="nv">$JENKINS_USER</span><span class="s2">:</span><span class="nv">$JENKINS_USER_PASS</span><span class="s2">"</span> <span class="nt">-H</span> <span class="nv">$JENKINS_CRUMB</span> <span class="nt">-s</span> <span class="se">\</span>
          <span class="nt">--cookie</span> /tmp/cookies <span class="nv">$JENKINS_URL</span><span class="s1">'/me/descriptorByName/jenkins.security.ApiTokenProperty/generateNewToken'</span> <span class="se">\</span>
          <span class="nt">--data</span> <span class="s1">'newTokenName=GlobalToken'</span>
</pre></table></code></div></div><p>You will get the following response for the above call. Extract the value for <code class="language-plaintext highlighter-rouge">tokenValue</code> and use it as the Access Token on consecutive API calls.</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"tokenName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GlobalToken"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tokenUuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cef3f33d-5e61-4d5e-a966-44d52546f5aa"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tokenValue"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1135b180fcc6ba2cbc0d3fb04621d8700a"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><h4 id="summary"><span class="mr-2">Summary</span><a href="#summary" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Following are all of the above commands together. You can execute all of the following commands and generate an Access token.</p><p>Note: Following commands need <code class="language-plaintext highlighter-rouge">curl</code> and <code class="language-plaintext highlighter-rouge">jq</code>. Execute in the same session.</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="c"># Change the following appropriately</span>
<span class="nv">JENKINS_URL</span><span class="o">=</span><span class="s2">"http://localhost:8080"</span>
<span class="nv">JENKINS_USER</span><span class="o">=</span>admin
<span class="nv">JENKINS_USER_PASS</span><span class="o">=</span>admin

<span class="c"># Get the Crumb**</span>

<span class="nv">JENKINS_CRUMB</span><span class="o">=</span><span class="si">$(</span>curl <span class="nt">-u</span> <span class="s2">"</span><span class="nv">$JENKINS_USER</span><span class="s2">:</span><span class="nv">$JENKINS_USER_PASS</span><span class="s2">"</span> <span class="nt">-s</span> <span class="nt">--cookie-jar</span> /tmp/cookies <span class="nv">$JENKINS_URL</span><span class="s1">'/crumbIssuer/api/xml?xpath=concat(//crumbRequestField,":",//crumb)'</span><span class="si">)</span>

<span class="c">#Get the Access token**</span>
<span class="nv">ACCESS_TOKEN</span><span class="o">=</span><span class="si">$(</span>curl <span class="nt">-u</span> <span class="s2">"</span><span class="nv">$JENKINS_USER</span><span class="s2">:</span><span class="nv">$JENKINS_USER_PASS</span><span class="s2">"</span> <span class="nt">-H</span> <span class="nv">$JENKINS_CRUMB</span> <span class="nt">-s</span> <span class="se">\</span>
                    <span class="nt">--cookie</span> /tmp/cookies <span class="nv">$JENKINS_URL</span><span class="s1">'/me/descriptorByName/jenkins.security.ApiTokenProperty/generateNewToken'</span> <span class="se">\</span>
                    <span class="nt">--data</span> <span class="s1">'newTokenName=GlobalToken'</span> | jq <span class="nt">-r</span> <span class="s1">'.data.tokenValue'</span><span class="si">)</span>
</pre></table></code></div></div><h3 id="creating-credentials"><span class="mr-2">Creating credentials</span><a href="#creating-credentials" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>You need to generate the approprite payload to create Credentials depending on the type of the credentials. You can refer the following for this.</p><h4 id="payload-for-create-username-password-credential"><span class="mr-2">Payload for Create Username Password Credential</span><a href="#payload-for-create-username-password-credential" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="nt">&lt;com.cloudbees.plugins.credentials.impl.UsernamePasswordCredentialsImpl&gt;</span>
  <span class="nt">&lt;id&gt;</span>TestCredentials<span class="nt">&lt;/id&gt;</span>
  <span class="nt">&lt;description&gt;</span>This is sample<span class="nt">&lt;/description&gt;</span>
  <span class="nt">&lt;username&gt;</span>admin2<span class="nt">&lt;/username&gt;</span>
  <span class="nt">&lt;password&gt;</span>admin2<span class="nt">&lt;/password&gt;</span>
<span class="nt">&lt;/com.cloudbees.plugins.credentials.impl.UsernamePasswordCredentialsImpl&gt;</span>
</pre></table></code></div></div><h4 id="payload-for-ssh-user-private-key"><span class="mr-2">Payload for SSH User Private Key</span><a href="#payload-for-ssh-user-private-key" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="nt">&lt;com.cloudbees.jenkins.plugins.sshcredentials.impl.BasicSSHUserPrivateKey&gt;</span>
  <span class="nt">&lt;id&gt;</span>SSHCredential<span class="nt">&lt;/id&gt;</span>
  <span class="nt">&lt;description&gt;&lt;/description&gt;</span>
  <span class="nt">&lt;username&gt;</span>ubuntu<span class="nt">&lt;/username&gt;</span>
  <span class="nt">&lt;usernameSecret&gt;</span>false<span class="nt">&lt;/usernameSecret&gt;</span>
  <span class="nt">&lt;privateKeySource</span> <span class="na">class=</span><span class="s">"com.cloudbees.jenkins.plugins.sshcredentials.impl.BasicSSHUserPrivateKey$DirectEntryPrivateKeySource"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;privateKey&gt;</span>PRIVATEKEY_HERE<span class="nt">&lt;/privateKey&gt;</span>
  <span class="nt">&lt;/privateKeySource&gt;</span>
<span class="nt">&lt;/com.cloudbees.jenkins.plugins.sshcredentials.impl.BasicSSHUserPrivateKey&gt;</span>
</pre></table></code></div></div><h4 id="payload-for-github-app-credentials"><span class="mr-2">Payload for Github App Credentials</span><a href="#payload-for-github-app-credentials" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="nt">&lt;org.jenkinsci.plugins.github__branch__source.GitHubAppCredentials&gt;</span>
  <span class="nt">&lt;id&gt;</span>GIthubApp_YCR<span class="nt">&lt;/id&gt;</span>
  <span class="nt">&lt;description&gt;&lt;/description&gt;</span>
  <span class="nt">&lt;appID&gt;</span>GitAppID<span class="nt">&lt;/appID&gt;</span>
  <span class="nt">&lt;privateKey&gt;</span>PRIVATE_KEY<span class="nt">&lt;/privateKey&gt;</span>
  <span class="nt">&lt;apiUri&gt;&lt;/apiUri&gt;</span>
  <span class="nt">&lt;owner&gt;</span>OWNER<span class="nt">&lt;/owner&gt;</span>
<span class="nt">&lt;/org.jenkinsci.plugins.github__branch__source.GitHubAppCredentials&gt;</span>
</pre></table></code></div></div><h4 id="payload-for-secret-text-content-credential"><span class="mr-2">Payload for Secret Text Content Credential</span><a href="#payload-for-secret-text-content-credential" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nt">&lt;org.jenkinsci.plugins.plaincredentials.impl.StringCredentialsImpl&gt;</span>
  <span class="nt">&lt;id&gt;</span>SecretTextYcr<span class="nt">&lt;/id&gt;</span>
  <span class="nt">&lt;description&gt;&lt;/description&gt;</span>
  <span class="nt">&lt;secret&gt;</span>SECRET_TEXT<span class="nt">&lt;/secret&gt;</span>
<span class="nt">&lt;/org.jenkinsci.plugins.plaincredentials.impl.StringCredentialsImpl&gt;</span>
</pre></table></code></div></div><h4 id="payload-for-x509-certdocker-server-credential"><span class="mr-2">Payload for X509 Cert/Docker Server Credential</span><a href="#payload-for-x509-certdocker-server-credential" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nt">&lt;org.jenkinsci.plugins.docker.commons.credentials.DockerServerCredentials&gt;</span>
  <span class="nt">&lt;id&gt;</span>X509Cert<span class="nt">&lt;/id&gt;</span>
  <span class="nt">&lt;description&gt;&lt;/description&gt;</span>
  <span class="nt">&lt;clientKey&gt;</span>CLIENT_KEY<span class="nt">&lt;/clientKey&gt;</span>
  <span class="nt">&lt;clientCertificate&gt;</span>CLIENT_CERTIFICATE<span class="nt">&lt;/clientCertificate&gt;</span>
  <span class="nt">&lt;serverCaCertificate&gt;</span>SERVER_CERT<span class="nt">&lt;/serverCaCertificate&gt;</span>
<span class="nt">&lt;/org.jenkinsci.plugins.docker.commons.credentials.DockerServerCredentials&gt;</span>
</pre></table></code></div></div><p>Add the content of the payload to a file named <code class="language-plaintext highlighter-rouge">credentials.xml</code></p><h4 id="constructing-the-api-url-for-creating-credentials"><span class="mr-2">Constructing the API URL for creating credentials</span><a href="#constructing-the-api-url-for-creating-credentials" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>The credential create URL format is <code class="language-plaintext highlighter-rouge">JENKINS_URL/credentials/store/CREDENTIALS_STORE_NAME/domain/DOMAIN_NAME/</code> You need to change this appropriately based on the location and the domain you are creating the credentials under. The easiest way to get this URL is by navigating to an existing credential from the UI and copying the URL.</p><p><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 500'%3E%3C/svg%3E" data-src="/assets/img/posts/JenkinsURL.png" alt="" width="300" height="500" data-proofer-ignore></p><p>Once you figure out the correct URL(context path) for the API call execute the following command.</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>curl <span class="nt">-u</span> <span class="nv">$JENKINS_USER</span>:<span class="nv">$ACCESS_TOKEN</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="nv">$JENKINS_CRUMB</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s1">'content-type:application/xml'</span> <span class="se">\</span>
    <span class="s2">"</span><span class="nv">$JENKINS_URL</span><span class="s2">/credentials/store/system/domain/_/createCredentials"</span> <span class="se">\</span>
    <span class="nt">-d</span> @credentials.xml
</pre></table></code></div></div><p>Hope the above helps!! Happy Coding.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/cicd/'>CICD</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/jenkins/" class="post-tag no-text-decoration" >jenkins</a> <a href="/tags/cicd/" class="post-tag no-text-decoration" >cicd</a> <a href="/tags/devops/" class="post-tag no-text-decoration" >devops</a> <a href="/tags/groovy/" class="post-tag no-text-decoration" >groovy</a> <a href="/tags/automation/" class="post-tag no-text-decoration" >automation</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Create+Jenkins+Credentials+Through+Rest+API+-+Yasassri+Ratnayake&url=https%3A%2F%2Fyasassri.github.io%2Fposts%2FCreateJenkinsCredentialsThroughRestAPI%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Create+Jenkins+Credentials+Through+Rest+API+-+Yasassri+Ratnayake&u=https%3A%2F%2Fyasassri.github.io%2Fposts%2FCreateJenkinsCredentialsThroughRestAPI%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fyasassri.github.io%2Fposts%2FCreateJenkinsCredentialsThroughRestAPI%2F&text=Create+Jenkins+Credentials+Through+Rest+API+-+Yasassri+Ratnayake" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/TrackStateOfIntegrationsInWSO2MI/">Building a Thread-Safe State Tracker Mediator for WSO2</a><li><a href="/posts/OverrridingjavaOptionsInjectedToJavaProcesses/">Solving Datadog Java Agent Conflicts in Kubernetes With A Simple C Library</a><li><a href="/posts/Delaying-Container-startup-until-a-Kubernetes-resources-are-created/">Delaying Application Startup Until Kubernetes Resources are Created</a><li><a href="/posts/ConvertingJavaClientToANativeExcutableWithGraalVM/">Converting Java CLI Client to a Native Executable with GraalVM</a><li><a href="/posts/Keeping-Your-WSO2-Products-up-to-date-in-a-ContainerisedEnv/">Keeping Your WSO2 Products up-to-date in a Containerised Environment</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/wso2/">wso2</a> <a class="post-tag" href="/tags/automation/">automation</a> <a class="post-tag" href="/tags/cicd/">cicd</a> <a class="post-tag" href="/tags/devops/">devops</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/jenkins/">jenkins</a> <a class="post-tag" href="/tags/wso2/">WSO2</a> <a class="post-tag" href="/tags/wso2mi/">wso2mi</a> <a class="post-tag" href="/tags/groovy/">groovy</a> <a class="post-tag" href="/tags/kubernetes/">Kubernetes</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/StopJenkinsRecurringJobAfterFixedNumberOfExecutions/"><div class="card-body"> <em class="small" data-ts="1665028800" data-df="ll" > Oct 6, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Stop A Recurring Jenkins Job After a Fixed number of Runs</h3><div class="text-muted small"><p> This solution was inspired by a Stackoverflow question I happen to answer. The requirement is not very common but thought of sharing it if anyone ever needs it. The requirement is something like th...</p></div></div></a></div><div class="card"> <a href="/posts/CreateA-JenkinsJobwithaGroovyScript/"><div class="card-body"> <em class="small" data-ts="1544974071" data-df="ll" > Dec 16, 2018 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Create A Jenkins Job with a Groovy Script</h3><div class="text-muted small"><p> In this post I will share some useful groovy code that can be used when creating a Jenkins job using a groovy script, so this groovy script can be used within a declarative pipeline as well if you ...</p></div></div></a></div><div class="card"> <a href="/posts/Parsing-data-between-Jenkins-Jobs/"><div class="card-body"> <em class="small" data-ts="1558359808" data-df="ll" > May 20, 2019 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Parsing data between Jenkins Jobs</h3><div class="text-muted small"><p> Jenkins is the most widely used CICD/Build tool that’s being used for many software projects. The stability and the extensibility of Jenkins has made it the number one go to tool when doing CICD wo...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/AuthorizationHandlerForWSO2MI/" class="btn btn-outline-primary" prompt="Older"><p>Role Based Authorization Hanlder for WSO2 Micro Integrator</p></a> <a href="/posts/CustomGithubActionForWSO2APICTL/" class="btn btn-outline-primary" prompt="Newer"><p>Custom Github Action for WSO2 APICTL</p></a></div><script type="text/javascript"> $(function () { const origin = "https://giscus.app"; const iframe = "iframe.giscus-frame"; const lightTheme = "light"; const darkTheme = "dark_dimmed"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "yasassri/yasassri.github.io", "data-repo-id": "R_kgDOHmz8Lw", "data-category": "comments", "data-category-id": "DIC_kwDOHmz8L84CRzO5", "data-mapping": "pathname", "data-reactions-enabled": "1", "data-emit-metadata": "0", "data-theme": initTheme, "data-input-position": "bottom", "data-lang": "en", "crossorigin": "anonymous", "async": "" }; let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementById("tail-wrapper").appendChild(giscusScript); addEventListener("message", (event) => { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); }); </script></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/yasassri">Yasassri Ratnayake</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/wso2/">wso2</a> <a class="post-tag" href="/tags/automation/">automation</a> <a class="post-tag" href="/tags/cicd/">cicd</a> <a class="post-tag" href="/tags/devops/">devops</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/jenkins/">jenkins</a> <a class="post-tag" href="/tags/wso2/">WSO2</a> <a class="post-tag" href="/tags/wso2mi/">wso2mi</a> <a class="post-tag" href="/tags/groovy/">groovy</a> <a class="post-tag" href="/tags/kubernetes/">Kubernetes</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-0LZHF72L8B"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-0LZHF72L8B'); }); </script>
