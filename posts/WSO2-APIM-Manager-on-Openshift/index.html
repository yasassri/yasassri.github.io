<!DOCTYPE html><html lang="en" data-mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="WSO2 APIM Manager on Openshift" /><meta property="og:locale" content="en" /><meta name="description" content="In this post I will be explaining how WSO2 products can be deployed on top of Openshift. By the time I was writing this blog I was using…" /><meta property="og:description" content="In this post I will be explaining how WSO2 products can be deployed on top of Openshift. By the time I was writing this blog I was using…" /><link rel="canonical" href="https://yasassri.github.io/posts/WSO2-APIM-Manager-on-Openshift/" /><meta property="og:url" content="https://yasassri.github.io/posts/WSO2-APIM-Manager-on-Openshift/" /><meta property="og:site_name" content="Yasassri Ratnayake" /><meta property="og:image" content="https://yasassri.github.io/assets/img/medium/1__vhZV2kNvYHsY6yVYZ9MRGw.jpeg" /><meta property="og:image:height" content="500" /><meta property="og:image:width" content="800" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2019-06-05T00:27:05-04:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://yasassri.github.io/assets/img/medium/1__vhZV2kNvYHsY6yVYZ9MRGw.jpeg" /><meta property="twitter:title" content="WSO2 APIM Manager on Openshift" /><meta name="twitter:site" content="@yasassrir" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-07-04T16:32:22-04:00","datePublished":"2019-06-05T00:27:05-04:00","description":"In this post I will be explaining how WSO2 products can be deployed on top of Openshift. By the time I was writing this blog I was using…","headline":"WSO2 APIM Manager on Openshift","image":{"width":800,"height":500,"alt":null,"url":"https://yasassri.github.io/assets/img/medium/1__vhZV2kNvYHsY6yVYZ9MRGw.jpeg","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://yasassri.github.io/posts/WSO2-APIM-Manager-on-Openshift/"},"url":"https://yasassri.github.io/posts/WSO2-APIM-Manager-on-Openshift/"}</script><title>WSO2 APIM Manager on Openshift | Yasassri Ratnayake</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Yasassri Ratnayake"><meta name="application-name" content="Yasassri Ratnayake"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/favicons/android-chrome-512x512.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Yasassri Ratnayake</a></div><div class="site-subtitle font-italic">My Personal Web Space</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/otherblogs/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>OTHER BLOGS</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/yasassri" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://stackoverflow.com/users/2627018/ycr" aria-label="stack-overflow" target="_blank" rel="noopener"> <i class="fab fa-stack-overflow"></i> </a> <a href="https://www.linkedin.com/in/yasassriratnayake" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['ycrnet','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>WSO2 APIM Manager on Openshift</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>WSO2 APIM Manager on Openshift</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1559708825" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jun 5, 2019 </em> </span> <span> Updated <em class="" data-ts="1656966742" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jul 4, 2022 </em> </span><div class="mt-3 mb-3"> <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 500'%3E%3C/svg%3E" data-src="/assets/img/medium/1__vhZV2kNvYHsY6yVYZ9MRGw.jpeg" class="preview-img bg" alt="Preview Image" width="800" height="500" data-proofer-ignore></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/yasassri">Yasassri Ratnayake</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2565 words"> <em>14 min</em> read</span></div></div></div><div class="post-content"><p>In this post I will be explaining how WSO2 products can be deployed on top of Openshift. By the time I was writing this blog I was using <strong>Openshift 3.11</strong> and this deployment is hardcoded for <strong>MSSQL.</strong></p><p>Openshift is the commercial Kubernetes offering that is provided by RedHat. Although the underline runtime is Kubernetes there are few differences when it comes to Openshift from Kubernetes. Mainly traffic routing, scaling/rollbacks and deployments are different in Openshift. Feature wise the main deferences are,</p><ol><li>Routes<li>Deployment Configs<li>Image streams etc.</ol><p>Routes are similar to ingress controllers in Kubernetes and routes are responsible for exposing the services externally. Deployment configs are similar to Deployments in Kubernetes but the internally it operated differently. It is true that we can use most of the kubernetes<br /> configurations within openshift as it is, but using Kubernetes artifacts as they are won’t let you utilize the added features that are available in Openshift.<br /> In order to utilize the features that are provided by openshift you should use openshift specific object types instead of Kuberenetes objects.<br /> For example you can use Kubernetes deplyments instead of Openshifts Deployment configs but using Deployment configs will allow<br /> you to use some neat features that are provided by Openshift, like adding triggers to deployments, undoing deployments, monitor deployment process and add triggers to your deployment to perform rolling updates etc. Some of these capabilities are not available with Kubernetes Deployments.</p><p>In this deployment I will be focussing on doing a production ready deployment, where you will do proper backing up of logs etc.</p><p>The related artifacts are located in <a href="https://github.com/yasassri/openshift-wso2-apim">https://github.com/yasassri/openshift-wso2-apim</a> From here on I will refer this repository as <Artifact_Home></Artifact_Home></p><h4 id="understanding-the-repository-structure"><span class="mr-2">Understanding the repository structure.</span><a href="#understanding-the-repository-structure" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>There are several directories in the <Artifact_Home>. Mainly docker, k8s, scripts, and resources. You can see the repository structure in the below image.</Artifact_Home></p><p><img data-src="/assets/img/medium/1__9UTyqNAlrlnsbvOOj9Fyhg.png" alt="" data-proofer-ignore></p><p>In the following section what each directory contains will be explained.</p><h4 id="docker-artifacts"><span class="mr-2">Docker artifacts</span><a href="#docker-artifacts" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Docker directory contains the docker artifacts to create docker images that are required by the openshift environment. If we look closely at the docker folder, it has the following content.</p><p><img data-src="/assets/img/medium/1__x2RPhCYw8__vt32tFbgkgxQ.png" alt="" data-proofer-ignore></p><p>Each product/profile has its own docker resources to create the necessary docker images. So if we consider a single directory which represents a single product it has the following folder structure.</p><p><img data-src="/assets/img/medium/1__k__ch7lB7v2Ygj34qJNfbzg.png" alt="" data-proofer-ignore></p><p>Files directory contains the necessary external artifacts that the Docker build process requires, for example, any external dependencies (SQL drivers) that the wso2 servers require should be added to the lib directory. The init.sh script is the entry point of the created docker container. So if you want to perform a task on docker container startup you should add this to the init.sh script. More details on docker image creation will be in a different section of this document.</p><h4 id="k8s-artifacts"><span class="mr-2">K8S Artifacts</span><a href="#k8s-artifacts" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Then we have the k8s directory. Which contains all the artifacts that are required to setup WSO2 servers on top of openshift. If we look closely it has the following folder structure.</p><p><img data-src="/assets/img/medium/1____8tMSEaTnfhd0uSF88JimQ.png" alt="" data-proofer-ignore></p><p>This structure is different from the docker structure since the grouping is done based on deployment patterns and a deployment contains multiple products and should be started in a specific order to make sure the deployment starts without errors and it is successful, so the products/profiles are grouped in a logical manner. If we take the apim-is directory it contains, WSO2 API Manager, Identity Server, API Manager Analytics worker and IS Analytics worker related artifacts. The folder structure would look like following,</p><p><img data-src="/assets/img/medium/1__uyo7s__rg0MhvMObYeH____Ow.png" alt="" data-proofer-ignore></p><p>Each directory named as the product will have K8S artifacts for that product. Typically it will have a K8S deployment yaml, a service yaml and in some cases a volume claim. As an example refer the following,</p><p><img data-src="/assets/img/medium/0__FCpOkdBPw32TO1Lr.jpg" alt="" data-proofer-ignore></p><p>Then for the configurations maps, we use the confs directory which will contain the configuration files that are needed for the config maps. For each product it will have a directory in the configs folder.</p><p><img data-src="/assets/img/medium/0__hM4l74mw1oGxWaD8.jpg" alt="" data-proofer-ignore></p><p>The above configurations will be mounted to the container on startup to alter the default configurations of WSO2 products. Only the configuration files that needs alterations are included here. These will be mounted as secrets or config maps depending on the requirement. The configurations doesn’t have all the values hardcoded, most configuration files will have place holders in them and these will be populated when deploying. For example if we take the <em>carbon.xml</em> the hostname of the server will be populated when deploying. So the configuration file will have a placeholder like below.</p><p><img data-src="/assets/img/medium/0__tIyXpTZTkni6LR1__.jpg" alt="" data-proofer-ignore></p><p>More information on these placeholders and how they get replaced will be provided in the later section of the document.</p><p>Then in the folder structure we have a routes directory which will contain the openshift route configurations. Following are the routes of the apim-is deployment.</p><p><img data-src="/assets/img/medium/0__1xE21lWdWQ9zeu64.jpg" alt="" data-proofer-ignore></p><p>Then within the K8S folder we have a directory called rbac and volumes.</p><p><img data-src="/assets/img/medium/1__d7cPnDw4PsejJWZRm__wEug.png" alt="" data-proofer-ignore></p><p>Rbac directory has the access control configurations that are required by the cluster user to get clustering information. The volumes has the configurations to create persistent volumes.</p><h4 id="resources-for-the-deployment"><span class="mr-2">Resources for the Deployment</span><a href="#resources-for-the-deployment" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>The <strong><em>resources</em></strong> directory holds the Db scripts and other relevant resources that are needed for the deployment.</p><p><img data-src="/assets/img/medium/1__MFT__XbsG6VfbJ97Xj0zcWw.png" alt="" data-proofer-ignore></p><p>Then we have the scripts directory which contains all the automation scripts to prepare the deployment artifacts and then to deploy WSO2 servers. How to use these scripts will be explained later.</p><p><img data-src="/assets/img/medium/1__EL0jTsdsDrb8__YTAuySF5Q.png" alt="" data-proofer-ignore></p><h3 id="deploying-wso2servers"><span class="mr-2">Deploying WSO2 servers</span><a href="#deploying-wso2servers" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h3 id="creating-necessary-databases-and-tables-for-wso2servers"><span class="mr-2">Creating necessary Databases and Tables for WSO2 servers</span><a href="#creating-necessary-databases-and-tables-for-wso2servers" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>WSO2 servers require DBs to persist the application and user data, so we need credentials to access a database. This particular DB user should have and Read/Right access to table and Table create permissions with the created Databases.</p><p>In the <REPO_HOME>/resources/db-setup directory it has the following scripts.</REPO_HOME></p><p><img data-src="/assets/img/medium/1__uifQfZ__xcnuI6trXPt__t6Q.png" alt="" data-proofer-ignore></p><ol><li>First inorder to create the necessary databases execute the <em>1-databases.sql</em> script on the MSSQL Server. This will create the necessary DBs.<li>Then execute all the scripts within the subfolders to create the necessary tables in the DBs. For <em>example apim/mssql.sql, common_um/mssql.sql</em>. There is no order for the execution, we need to execute all the scripts.<li>Executing the above scripts will create the necessary databases along with the tables. Now create a user who has aforementioned permissions to access the above databases.</ol><h4 id="creating-the-key-stores-for-theservers"><span class="mr-2">Creating the key-stores for the servers</span><a href="#creating-the-key-stores-for-theservers" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>You can follow the steps in the below section to create a new keystore with a private key and a new public certificate. We will be using the keytool that is available with your JDK installation for creating the keys-stores. Note that the public key certificate we generate for the keystore is self-signed. Therefore, if you need a public key that is CA-signed, you need to generate a CA-signed certificate and import it to the keystore.</p><p>Change the CN name appropriately depending on the environment and execute the following command in the terminal. You can specify any value for the <KEY_PASS></KEY_PASS></p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>keytool <span class="nt">-genkey</span> <span class="nt">-alias</span> wso2carbon <span class="nt">-keyalg</span> RSA <span class="nt">-keysize</span> 2048 <span class="nt">-keystore</span> wso2carbon.jks <span class="nt">-dname</span> “CN<span class="o">=</span><span class="se">\*</span>.apps.wso2.com, <span class="nv">OU</span><span class="o">=</span>BP,O<span class="o">=</span>WSO2,L<span class="o">=</span>EC,S<span class="o">=</span>WS,C<span class="o">=</span>EC<span class="s2">" -storepass &lt;KEY_PASS&gt; -keypass &lt;KEY_PASS&gt; -validity 7300
</span></pre></table></code></div></div><p>Here we are using *.apps.wso2.com as the CN for the self signed certificate. You need to change this depending on your environment. <KEY_PASS> is the only value you should be changing. Also note that the storepass and the keypass has to be the same.</KEY_PASS></p><p>Next fom the created keystore above lets extract the public certificate from the keystore. To do that execute the following command. This will store the public key in a file called wso2pub.pem.</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>keytool <span class="nt">-export</span> <span class="nt">-alias</span> wso2carbon <span class="nt">-keystore</span> wso2carbon.jks <span class="nt">-file</span> wso2pub.pem
</pre></table></code></div></div><p>Now let’s import this to the client-trustore.jks of WSO2 server. From any WSO2 pack copy the client-trustore.jks and from where the keystore is located execute the following command to delete the existing public certificate. When prompted for the password enter wso2carbon as the password.</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>keytool <span class="nt">-delete</span> <span class="nt">-alias</span> wso2carbon <span class="nt">-keystore</span> client-truststore.jks
</pre></table></code></div></div><p>Then execute the following command to import the new public certificate we created.</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>keytool <span class="nt">-import</span> <span class="nt">-alias</span> wso2carbon <span class="nt">-file</span> wso2pub.pem <span class="nt">-keystore</span> client-truststore.jks <span class="nt">-storepass</span> &lt;KEY_PASS&gt;
</pre></table></code></div></div><p>Next execute the following command to change the default password of the client-trstore. When prompted for the existing password enter wso2carbon as the password.</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>keytool <span class="nt">-keystore</span> client-truststore.jks <span class="nt">-storepass</span> wso2carbon <span class="nt">-storepasswd</span>
</pre></table></code></div></div><p>You can refer the following documentation for more information on using an existing private key and a certificate to create the necessary keystores. <a href="https://docs.wso2.com/display/ADMIN44x/Creating+New+Keystores#CreatingNewKeystores-Creatinganewkeystore">https://docs.wso2.com/display/ADMIN44x/Creating+New+Keystores#CreatingNewKeystores-Creatinganewkeystore</a></p><h3 id="downloading-wso2-product-distributions-andupdating"><span class="mr-2">Downloading WSO2 Product distributions and updating</span><a href="#downloading-wso2-product-distributions-andupdating" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>For the deployment we need WSO2 distributions, there are few ways to download WSO2 distributions. We will use WSO2 Update Manager to download distributions in this case.</p><p>Inorder to download wso2 product distributions or any updates you need to setup WSO2 Update manager(WUM) tool. You can refer the following document to setup the WUM tool (<a href="https://wso2.com/wum/download">https://wso2.com/wum/download</a>). So you should have an active subscription to WSO2 products and a user to configure WUM. Also an internet connection is required by the WUM tool.</p><p>After setting up WUM you can download the products by executing the following command.</p><blockquote><p>wum add wso2is-analytics-5.7.0</p></blockquote><p>We need to download the following set of products and you can repeat the above command with the following values.</p><ul><li>wso2is-km-5.7.0<li>wso2am-analytics-2.6.0<li>wso2am-2.6.0<li>wso2is-analytics-5.7.0</ul><p>After downloading you can list the products with the following command,</p><blockquote><p>wum list</p></blockquote><p><img data-src="/assets/img/medium/0__WsTlh0wbxLp237h__.jpg" alt="" data-proofer-ignore></p><p>Next you can check whether wum updates are available for a given product. You can execute the following command to check for updates.</p><blockquote><p>wum check-update wso2ei-6.4.0</p></blockquote><p>This will give the following output if updates are available.</p><p><img data-src="/assets/img/medium/0__5__gerzSygIvSirjN.jpg" alt="" data-proofer-ignore></p><p>Now you can do an update of the product. To do this execute the following command.</p><blockquote><p>wum update wso2ei-6.4.0</p></blockquote><p>You can repeat the above steps and get updates for all the products.</p><p>After updating the product the product should be available at a location similar to following.</p><blockquote> <USER_HOME>/.wum3/products/wso2am/2.6.0/full </USER_HOME></blockquote><p>If you perform multiple updates you will have multiple distributions in this location so make sure you use the distribution with the latest timestamp. Refer the following image.</p><p><img data-src="/assets/img/medium/0__E0t0r1vBrkTyqS7S.jpg" alt="" data-proofer-ignore></p><p><strong>Preparing Openshift Environment</strong></p><p>Before we start deploying WSO2 artifact we need to prepare Openshift environment. In the openshift environment we need to create a project, service account etc. This needs to performed by the Openshift administrator. The Openshift administrator can refer the script <a href="https://github.com/yasassri/openshift-wso2-apim/blob/master/scripts/1-prepare-openshift.sh">1-prepare-openshift.sh</a> The content of this file is as following,</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
</pre><td class="rouge-code"><pre><span class="c">#!/bin/bash  </span>
  
<span class="c"># ------------------------------------------------------------------------  </span>
<span class="c"># Copyright 2019 WSO2, Inc. (http://wso2.com)  </span>
<span class="c">#  </span>
<span class="c"># Licensed under the Apache License, Version 2.0 (the "License");  </span>
<span class="c"># you may not use this file except in compliance with the License.  </span>
<span class="c"># You may obtain a copy of the License at  </span>
<span class="c">#  </span>
<span class="c"># http://www.apache.org/licenses/LICENSE-2.0  </span>
<span class="c">#  </span>
<span class="c"># Unless required by applicable law or agreed to in writing, software  </span>
<span class="c"># distributed under the License is distributed on an "AS IS" BASIS,  </span>
<span class="c"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  </span>
<span class="c"># See the License for the specific language governing permissions and  </span>
<span class="c"># limitations under the License  </span>
<span class="c"># ------------------------------------------------------------------------  </span>
<span class="nv">oc</span><span class="o">=</span><span class="se">\`</span>which oc<span class="se">\`</span>  
  
<span class="c"># This is for creating the secret to authenticate with the Docker registry.  </span>
<span class="nv">DOCKER_REG_URL</span><span class="o">=</span><span class="s2">"docker.wso2.com"</span>  
<span class="nv">PROJECT_NAME</span><span class="o">=</span><span class="nv">$K8S_NAMESPACE</span>  
<span class="nv">DOCKER_REG_USERNAME</span><span class="o">=</span><span class="s2">"DOCKER_REG_PASSWORD"</span>  
<span class="nv">DOCKER_REG_EMAIL</span><span class="o">=</span><span class="s2">"dev@wso2.com"</span>  
  
oc new-project <span class="nv">$PROJECT_NAME</span> <span class="nt">--description</span><span class="o">=</span><span class="s2">"WSO2 Dev Project"</span> <span class="nt">--display-name</span><span class="o">=</span><span class="s2">"WSO2 Dev"</span>  
oc project <span class="nv">$PROJECT_NAME</span>  
  
oc create serviceaccount wso2svc-account <span class="nt">-n</span> <span class="nv">$PROJECT_NAME</span>  
  
<span class="c"># Create the pvs   </span>
<span class="c"># Most cases this will be created by the cluster admin, so DO NOT execute if already there.  </span>
oc create <span class="nt">-f</span> ../k8s/volumes/persistent-volumes.yaml  
  
<span class="c"># Create the Rbac for WSO2 clustering  </span>
oc create <span class="nt">-f</span> ../k8s/rbac/rbac.yaml  
  
<span class="c"># Creating the  ADM policy to retrieve k8s cluster information from the svc account  </span>
  
<span class="c"># We need to create a Docker registry secret if authentication is required by the registry.  </span>
<span class="c">#oc create secret docker-registry wso2creds --docker-server=${DOCKER_REG_URL} --docker-username=${DOCKER_REG_USERNAME} --docker-password=${DOCKER_REG_PASSWORD} --docker-email=${DOCKER_REG_EMAIL}</span>
</pre></table></code></div></div><h4 id="creating-the-docker-images-andpushing"><span class="mr-2">Creating the Docker images and Pushing</span><a href="#creating-the-docker-images-andpushing" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Note: You need to have docker installed in the system. Also unzip as well.</p><p>After preparing the openshift environment and copying all the WSO2 distributions to a single directory we can start the docker image creation process. Note that I’m using the internal docker registry of Openshift here and you can modify these scripts and use any docker registry that is desired.</p><p>Next navigate to the <Artifact_Home>/scripts directory and open the 0-setEnvironment.sh and set the variables with appropriate values. The content of this file is as below and each variable will be explained below,</Artifact_Home></p><p>Following variable name contains the project name/namespace of the WSO2 deployment, this name is specific to openshift and can be set depending on the environment.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>export K8S_NAMESPACE="wso2"
</pre></table></code></div></div><p>This is the docker registry URL of the Openshift environment, you can ask your openshift admin for this.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>export DOCKER_REGISTRY_URL="registry.apps.wso2.com"  
export DOCKER_REGISTRY_NAMESPACE=$K8S_NAMESPACE
</pre></table></code></div></div><p>The name of the directory which contains the keystores that are being used</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>export KEYSTORE_DIR_NAME="dev-env" # The directory name which contains environment specific keystores in resources/keystores  
export WSO2_PACK_LOCATION="" # The directory where WSO2 packs reside
</pre></table></code></div></div><p>Following are the DNS names that are used for different WSO2 servers. Need to change the values depending on the environment.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>#DNS Names for the servers  
export APIM_HOST_NAME="apim.apps.wso2.com"  
export APIM_GW_HOST_NAME="gw.apps.wso2.com"  
export IS_HOST_NAME="identity.apps.wso2.com"
</pre></table></code></div></div><p>Following are the database details of WSO2</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>#DB Details  
#For all the DB’s the same user will be used.  
export DB_URL="10.2.1.2:1433" # host:port  
export DB_USER="root"  
export DB_USER_PASSWORD="root123456"
</pre></table></code></div></div><p>WSO2 admin credentials.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>#Master admin of the WSO2 server  
export ADMIN_USER="admin"  
export ADMIN_USER_PASSWORD="bpadmin"  
export ADMIN_USER_PASSWORD_ENCODED="YnBhZG1pbg==" # This is the base64 encoded value of the admin password, you can use [https://www.base64encode.org/](https://www.base64encode.org/) to encode.
</pre></table></code></div></div><p>WSO2 keytstore credentials</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>#Keystore Details  
export KEYSTORE_PASSWORD="wso2carbon"  
export TRUSTORE_PASSWORD="wso2carbon"
</pre></table></code></div></div><p>After properly setting the variables source this file. Execute the following command to do this.</p><blockquote><p>source ./0-setEnvironment.sh</p></blockquote><p>After sourcing the file execute the docker image creation script.</p><blockquote><p>./2-createDockerImages.sh</p></blockquote><p>This will create the docker images. To push the docker images to the registry execute the following script.</p><blockquote><p>./3-pushDockerImages.sh</p></blockquote><p>After pushing the docker images you can browse the docker images in the Openshift console. You need to login to the openshift console and you need to have proper permissions to view the created project in Openshft. After login select the project and navigate to Builds -&gt; Images tab and the created images will be shown as below.</p><p><img data-src="/assets/img/medium/1__fV3MzWTtvJyNiuk7__zFAZg.png" alt="" data-proofer-ignore></p><h4 id="deploying-apim"><span class="mr-2">Deploying APIM</span><a href="#deploying-apim" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Before deploying the products we need to bootstrap configurations, in order to do this execute the following command from within the scripts directory.</p><blockquote><p>./4-bootstrap-configs.sh</p></blockquote><p>Next we need to execute the apim deployment script. You can execute the following script from with the scripts directory.</p><blockquote><p>./5-apim-is-deploy.sh</p></blockquote><p>The above will create the Openshift artifacts that are related to API Manager and IS. You can check the deployment process by navigating to the Openshift console. The progress of the deployment will be shown in the Openshift console.</p><p><img data-src="/assets/img/medium/1__LJVfk57o__m5wLMhtw2cdlQ.png" alt="" data-proofer-ignore></p><p>To check the status of the pods you can click on a deployment or you can open the pods page under Applications.</p><p><img data-src="/assets/img/medium/1__xFZJclgnabOLkVzS9OWnSw.png" alt="" data-proofer-ignore></p><p>Also from the pod you can check the events that are associated with the pod. This will reveal any errors that are generated in the deployment time.</p><p><img data-src="/assets/img/medium/1__Nri9C1NXjR7d7Fda4OPoSA.png" alt="" data-proofer-ignore></p><p>Also from the pods you can check the logs of the pods by navigating to the logs tab,</p><p><img data-src="/assets/img/medium/1__xLDg0FPmRKxN9ggOvn8ALQ.png" alt="" data-proofer-ignore></p><p>If you need to access the pod itself you can navigate to the terminal tab and it will open a terminal session to the pod</p><p><img data-src="/assets/img/medium/1__eHt____XG999mMIA__pNBdE__Q.png" alt="" data-proofer-ignore></p><h4 id="accessing-the-deployment"><span class="mr-2">Accessing the Deployment</span><a href="#accessing-the-deployment" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Openshift routes handle all inbound traffic that is received by the application. In-order to check the status of routes you can navigate to the routes section. The accessible URLs of the deployment will be shown in routes. You can navigate to a specified route to access the different components of APIM.</p><p><img data-src="/assets/img/medium/1__qd6Y87EkoXYxq9UdvR06__Q.png" alt="" data-proofer-ignore></p><p>So that’s it hope this helps and please drop a comment if you have any questions.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/wso2/'>WSO2</a>, <a href='/categories/api-manager/'>API Manager</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/wso2/" class="post-tag no-text-decoration" >wso2</a> <a href="/tags/devops/" class="post-tag no-text-decoration" >devops</a> <a href="/tags/openshift/" class="post-tag no-text-decoration" >openshift</a> <a href="/tags/k8s/" class="post-tag no-text-decoration" >k8s</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=WSO2+APIM+Manager+on+Openshift+-+Yasassri+Ratnayake&url=https%3A%2F%2Fyasassri.github.io%2Fposts%2FWSO2-APIM-Manager-on-Openshift%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=WSO2+APIM+Manager+on+Openshift+-+Yasassri+Ratnayake&u=https%3A%2F%2Fyasassri.github.io%2Fposts%2FWSO2-APIM-Manager-on-Openshift%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fyasassri.github.io%2Fposts%2FWSO2-APIM-Manager-on-Openshift%2F&text=WSO2+APIM+Manager+on+Openshift+-+Yasassri+Ratnayake" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/TrackStateOfIntegrationsInWSO2MI/">Building a Thread-Safe State Tracker Mediator for WSO2</a><li><a href="/posts/OverrridingjavaOptionsInjectedToJavaProcesses/">Solving Datadog Java Agent Conflicts in Kubernetes With A Simple C Library</a><li><a href="/posts/Delaying-Container-startup-until-a-Kubernetes-resources-are-created/">Delaying Application Startup Until Kubernetes Resources are Created</a><li><a href="/posts/ConvertingJavaClientToANativeExcutableWithGraalVM/">Converting Java CLI Client to a Native Executable with GraalVM</a><li><a href="/posts/Keeping-Your-WSO2-Products-up-to-date-in-a-ContainerisedEnv/">Keeping Your WSO2 Products up-to-date in a Containerised Environment</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/wso2/">wso2</a> <a class="post-tag" href="/tags/automation/">automation</a> <a class="post-tag" href="/tags/cicd/">cicd</a> <a class="post-tag" href="/tags/devops/">devops</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/jenkins/">jenkins</a> <a class="post-tag" href="/tags/wso2/">WSO2</a> <a class="post-tag" href="/tags/wso2mi/">wso2mi</a> <a class="post-tag" href="/tags/groovy/">groovy</a> <a class="post-tag" href="/tags/kubernetes/">Kubernetes</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/CustomizeAndManageWSO2APIManagerAccessLogs/"><div class="card-body"> <em class="small" data-ts="1527845910" data-df="ll" > Jun 1, 2018 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Customize and Manage WSO2 API-Manager Access Logs</h3><div class="text-muted small"><p> In any enterprise application it is important that we properly manage access logs which can be analyzed realtime or at a later stage. When it comes to WSO2 products they do provide access-login cap...</p></div></div></a></div><div class="card"> <a href="/posts/CreateJenkinsCredentialsThroughRestAPI/"><div class="card-body"> <em class="small" data-ts="1657425600" data-df="ll" > Jul 10, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Create Jenkins Credentials Through Rest API</h3><div class="text-muted small"><p> In this post I’ll explain how you can create Jenkins credentials through the Jenkins Rest API. Let’s get into it straight away. How To Authenticate Jenkins API Inorder to Authenticate the API cal...</p></div></div></a></div><div class="card"> <a href="/posts/CustomGithubActionForWSO2APICTL/"><div class="card-body"> <em class="small" data-ts="1664856000" data-df="ll" > Oct 4, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Custom Github Action for WSO2 APICTL</h3><div class="text-muted small"><p> I have worked with Github Actions in some projects and used quite a few Actions written by others. So I wanted to write my own custom action to experience the process. So here I’m with this post af...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Parsing-data-between-Jenkins-Jobs/" class="btn btn-outline-primary" prompt="Older"><p>Parsing data between Jenkins Jobs</p></a> <a href="/posts/Restricting-Access-to-WSO2-Servers/" class="btn btn-outline-primary" prompt="Newer"><p>Restricting Access to WSO2 Servers</p></a></div><script type="text/javascript"> $(function () { const origin = "https://giscus.app"; const iframe = "iframe.giscus-frame"; const lightTheme = "light"; const darkTheme = "dark_dimmed"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "yasassri/yasassri.github.io", "data-repo-id": "R_kgDOHmz8Lw", "data-category": "comments", "data-category-id": "DIC_kwDOHmz8L84CRzO5", "data-mapping": "pathname", "data-reactions-enabled": "1", "data-emit-metadata": "0", "data-theme": initTheme, "data-input-position": "bottom", "data-lang": "en", "crossorigin": "anonymous", "async": "" }; let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementById("tail-wrapper").appendChild(giscusScript); addEventListener("message", (event) => { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); }); </script></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/yasassri">Yasassri Ratnayake</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/wso2/">wso2</a> <a class="post-tag" href="/tags/automation/">automation</a> <a class="post-tag" href="/tags/cicd/">cicd</a> <a class="post-tag" href="/tags/devops/">devops</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/jenkins/">jenkins</a> <a class="post-tag" href="/tags/wso2/">WSO2</a> <a class="post-tag" href="/tags/wso2mi/">wso2mi</a> <a class="post-tag" href="/tags/groovy/">groovy</a> <a class="post-tag" href="/tags/kubernetes/">Kubernetes</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-0LZHF72L8B"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-0LZHF72L8B'); }); </script>
